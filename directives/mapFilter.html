<div id='googleMap' ng-class="{open: showResultList}"></div>

<div class="resultList" ng-class="{open: showResultList}">
	<h2>Included Climbs</h2>

	<div class="resultSpot" ng-repeat="(key, spot) in filteredList track by spot.key">
		<div class="spotDetails">
			<h3 class="clickable" ng-click="showMarker(spot.key)">{{spot.name}}</h3>
			<ul class="spotClimbs">

				<li ng-repeat="climb in spot.climbs">
					<div class="climbResult">
						<!-- <div class="addToList" ng-click="showAddListCont(climb, $event)"> -->
						<div class="addToList" ng-click="showAddList = !showAddList">
							<i class="fa fa-plus-circle"></i>
						</div>
						<div class="climbRating">{{climb.grade}}</div>
						<a href="#" ng-click="">{{climb.name}}</a>
					</div>

					<!-- TODO: add the 'Add to List' dropdown -->
					<div class="listAddCont" ng-show="showAddList">

						<div class="listView" ng-if="userProfile.lists">
							<h3>My Lists</h3>
							<div class="listItemCont" ng-repeat="(name, list) in userProfile.lists">
								<div class="clickListItem" ng-click="addToList(climb, list)">
									<div class="listName">{{name}}</div>
									<i class="fa fa-plus-circle"></i>
								</div>
							</div>

							<h3 class="clickable" ng-click="showNewList = !showNewList">Create new list</h3>
							<div class="addNewListCont" ng-show="showNewList">
								<label for="listName">Name</label>
								<input type="text" name="listName" ng-model="tempListName">
								<button id="addListBtn" ng-click="addList()">Save</button>
							</div>
						</div>

						<div class="createListView" ng-if="!userProfile.lists">
							<h3>Create your first list</h3>
							<input type="text" name="listName">
							<button id="addListBtn" ng-click="addList()">Save</button>
						</div>

					</div>

				</li>

			</ul>
		</div>
	</div>


	<div class="listAddCont" ng-show="addListCont">

		<div class="closeListAddBtn" ng-click="hideListCont()">
			<i class="fa fa-times"></i>
		</div>
		<h4>Adding {{currentClimb.name}}</h4>

		<div class="listView" ng-if="userProfile.lists">
			<h3>My Lists</h3>
			<div class="listItemCont" ng-repeat="(name, list) in userProfile.lists">
				<div class="clickListItem" ng-click="addToList(list)">
					<div class="listName">{{name}}</div>
					<i class="fa fa-plus-circle"></i>
				</div>
			</div>

			<h3 class="clickable" ng-click="toggleAddNewList()">Create new list</h3>
			<div class="addNewListCont" ng-show="addNewListCont">
				<label for="listName">Name</label>
				<input type="text" name="listName" ng-model="tempListName">
				<button id="addListBtn" ng-click="addList()">Save</button>
			</div>

		</div>


		<div class="createListView" ng-if="!userProfile.lists">
			<h3>Create your first list</h3>
			<input type="text" name="listName">
			<button id="addListBtn" ng-click="addList()">Save</button>
		</div>

	</div> <!-- end list add cont -->

</div>

<article class="filterBar">

	<button class="showListBtn" ng-click="toggleList()" ng-class="{active: showResultList}">
		<span ng-if="!showResultList">Show list</span>
		<span ng-if="showResultList">Hide list</span>
	</button>

	<h2>Filter Routes and Problems</h2>

	<div class="filterSection">
		<h3 class="clickable" ng-click="toggleFilter('type')">Climb type</h3>

		<div class="filters" ng-show="filter.type.showing">
			<label>
				<input type="checkbox" checked="checked" ng-model="filter.type.roped" ng-change="filterType('roped')">
				Roped
			</label>
			<div class="ropeSubTypes" ng-show="filter.type.roped">			
				<label>
					<input type="checkbox" checked="checked" ng-model="filter.type.sport" ng-change="filterType('sport')">
					Sport
				</label>
				<label>
					<input type="checkbox" checked="checked" ng-model="filter.type.trad" ng-change="filterType('trad')">
					Trad
				</label>
				<label>
					<input type="checkbox" checked="checked" ng-model="filter.type.topRope" ng-change="filterType('topRope')">
					Top-rope
				</label>
			</div>
			<label>
				<input type="checkbox" checked="checked" ng-model="filter.type.boulder" ng-change="filterType('boulder')">
				Boulders
			</label>
		</div>
	</div>

	<div class="filterSection">
		<h3 class="clickable" ng-click="toggleFilter('grade')">Grade</h3>

		<div class="filters" ng-show="filter.grade.showing">
			<div class="boulderGrades" ng-show="filter.type.boulder">

				<!-- Split in two to keep order -->
				<label ng-repeat="(grade, val)  in filter.grade.boulder.small">
					<input type="checkbox" checked="checked" ng-model="filter.grade.boulder.small[grade]" ng-change="filterBoulderGrade(grade)">
					V{{grade}}
				</label>

				<label ng-repeat="(grade, val)  in filter.grade.boulder.large">
					<input type="checkbox" checked="checked" ng-model="filter.grade.boulder.large[grade]" ng-change="filterBoulderGrade(grade)">
					V{{grade}}
				</label>

			</div>
		</div>
	</div>
</article>