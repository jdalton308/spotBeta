<div id='googleMap' ng-class="{open: showResultList}"></div>

<div class="climbDetailsView" ng-class="{thin: showResultList}" ng-show="showClimbDetails">
	<div class="closeDetailsBtn" ng-click="showClimbDetails = false">
		<i class="fa fa-times"></i>
	</div>
	<div class="climbDetailsWrapper">
		<h2>{{currentClimb.name}}</h2>
		<ul class="detailsList">
			<li class="detailsList-detail" ng-repeat="(key, val) in currentClimb">
				<p><strong>{{key}}:</strong> {{val}}</p>
			</li>
		</ul>

		<p ng-click="addToListView = !addToListView" ng-show="signedIn()">Add to list</p>
		<div class="listAddCont" ng-show="addToListView">
			<div class="listAddList" ng-if="userProfile.lists">
				<h3>My Lists</h3>
				<div class="listItemCont" ng-repeat="(name, list) in userProfile.lists">
					<div class="clickListItem" ng-click="addToList(climb, list)">
						<div class="listName">{{name}}</div>
						<i class="fa fa-plus-circle"></i>
					</div>
				</div>

				<p class="clickable" ng-click="showNewList = !showNewList"><i class="fa fa-plus-circle"></i>Create new list</p>
				<div class="addNewListCont" ng-show="showNewList">
					<label for="listName">Name</label>
					<input type="text" name="listName" ng-model="listName">
					<button id="addListBtn" ng-click="addList(listName)">Save</button>
				</div>
			</div>

			<div class="createListView" ng-if="!userProfile.lists">
				<h3>Create your first list</h3>
				<input type="text" name="listName" ng-model="listName">
				<button id="addListBtn" ng-click="addList(listName)">Save</button>
			</div>

		</div>
	</div>
</div>

<div class="resultList" ng-class="{open: showResultList}">
	<h2>Included Climbs</h2>

	<div class="resultSpot" ng-repeat="(key, spot) in filteredList track by spot.key">
		<div class="spotDetails">
			<h3 class="clickable" ng-click="showMarker(spot.key)">{{spot.name}}</h3>
			<ul class="spotClimbs">

				<li ng-repeat="climb in spot.climbs">
					<div class="climbResult">
						<!-- <div class="addToList" ng-click="showAddListCont(climb, $event)"> -->
						<div class="addToList" ng-click="showAddList = !showAddList" ng-show="signedIn()">
							<i class="fa fa-plus-circle"></i>
						</div>
						<div class="climbRating">{{climb.grade}}</div>
						<a href="#" ng-click="showDetails(climb)">{{climb.name}}</a>
					</div>

					<div class="listAddCont" ng-show="showAddList">

						<div class="listAddList" ng-if="userProfile.lists">
							<h3>My Lists</h3>
							<div class="listItemCont" ng-repeat="(name, list) in userProfile.lists">
								<div class="clickListItem" ng-click="addToList(climb, list)">
									<div class="listName">{{name}}</div>
									<i class="fa fa-plus-circle"></i>
								</div>
							</div>

							<p class="clickable" ng-click="showNewList = !showNewList"><i class="fa fa-plus-circle"></i>Create new list</p>
							<div class="addNewListCont" ng-show="showNewList">
								<label for="listName">Name</label>
								<input type="text" name="listName" ng-model="listName">
								<button id="addListBtn" ng-click="addList(listName)">Save</button>
							</div>
						</div>

						<div class="createListView" ng-if="!userProfile.lists">
							<h3>Create your first list</h3>
							<input type="text" name="listName" ng-model="listName">
							<button id="addListBtn" ng-click="addList(listName)">Save</button>
						</div>

					</div>

				</li>

			</ul>
		</div>
	</div>

</div>

<article class="filterBar">

	<button class="showListBtn" ng-click="toggleList()" ng-class="{active: showResultList}">
		<span ng-if="!showResultList">Show list</span>
		<span ng-if="showResultList">Hide list</span>
	</button>

	<h2>Filter Routes and Problems</h2>

	<div class="filterSection">
		<h3 class="clickable" ng-click="toggleFilter('type')">Climb type</h3>

		<div class="filters" ng-show="filter.type.showing">
			<label>
				<input type="checkbox" checked="checked" ng-model="filter.type.roped" ng-change="filterType('roped')">
				Roped
			</label>
			<div class="ropeSubTypes" ng-show="filter.type.roped">
				<label>
					<input type="checkbox" checked="checked" ng-model="filter.type.sport" ng-change="filterType('sport')">
					Sport
				</label>
				<label>
					<input type="checkbox" checked="checked" ng-model="filter.type.trad" ng-change="filterType('trad')">
					Trad
				</label>
				<label>
					<input type="checkbox" checked="checked" ng-model="filter.type.topRope" ng-change="filterType('topRope')">
					Top-rope
				</label>
			</div>
			<label>
				<input type="checkbox" checked="checked" ng-model="filter.type.boulder" ng-change="filterType('boulder')">
				Boulders
			</label>
		</div>
	</div>

	<div class="filterSection">
		<h3 class="clickable" ng-click="toggleFilter('grade')">Grade</h3>

		<div class="filters" ng-show="filter.grade.showing">
			<div class="boulderGrades" ng-show="filter.type.boulder">

				<!-- Split in two to keep order -->
				<!-- <label ng-repeat="(grade, val)  in filter.grade.boulder.small">
					<input type="checkbox" checked="checked" ng-model="filter.grade.boulder.small[grade]" ng-change="filterBoulderGrade(grade)">
					V{{grade}}
				</label>

				<label ng-repeat="(grade, val)  in filter.grade.boulder.large">
					<input type="checkbox" checked="checked" ng-model="filter.grade.boulder.large[grade]" ng-change="filterBoulderGrade(grade)">
					V{{grade}}
				</label> -->
				<p>Boulder Grades</p>
				<jd-slider type="boulder" filter="filter"></jd-slider>

			</div>
			<div class="ropedGrades" ng-show="filter.type.roped">
				Roped Grades
				<jd-slider type="roped" filter="filter"></jd-slider>
			</div>

		</div>
	</div>

	<div class="filterSection">
		<h3 class="clickable" ng-click="toggleFilter('rating')">Rating</h3>

		<div class="filters" ng-show="filter.rating.showing">

			<label ng-repeat="(star, val) in filter.rating.stars">
				<input type="checkbox" checked="checked" ng-model="filter.rating.stars[star]" ng-change="filterStarRating(star)">
				{{star}}
			</label>

		</div>
	</div>

	<div class="filterSection">
		<h3 class="clickable" ng-click="toggleFilter('height')">Height</h3>

		<div class="filters" ng-show="filter.height.showing">
			<label ng-repeat="(height, val) in filter.height.groups">
				<input type="checkbox" checked="checked" ng-model="val" ng-change="filterHeight(height)">
				{{height}} feet
			</label>
		</div>
	</div>

	<div class="filterSection">
		<button ng-click="resetFilters(true)" class="resetBtn">Show all</button>
		<button ng-click="resetFilters(false)" class="resetBtn">Hide all</button>
	</div>

</article>